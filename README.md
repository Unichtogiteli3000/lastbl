# Музыкальная библиотека - Информационная система

## Описание
Полноценная клиент-серверная информационная система "Музыкальная библиотека" с управлением базой данных. Система позволяет хранить, изменять, просматривать и анализировать информацию о музыкальных треках и их метаданных.

## Архитектура
- **Клиентская часть:** HTML, CSS, JavaScript с интерфейсом на русском языке
- **Серверная часть:** Flask API с аутентификацией и обработкой запросов
- **База данных:** PostgreSQL с хранимыми процедурами на PL/pgSQL
- **Безопасность:** JWT-аутентификация, разграничение прав, аудит операций

## Структура проекта
- `client/` - Клиентская часть (HTML, CSS, JavaScript)
- `server.py` - Серверная часть (Flask API)
- `database_schema.sql` - Схема базы данных и хранимые процедуры
- `requirements.txt` - Зависимости Python
- `README_SERVER.md` - Документация серверной части
- `STORAGE_PROCEDURES.md` - Документация по хранимым процедурам

## Функциональность

### Основные разделы:
1. **Профиль пользователя**
   - Просмотр и редактирование личной информации
   - Смена аватара
   - Управление любимыми жанрами и исполнителями

2. **Треки**
   - Просмотр своих треков
   - Добавление новых треков
   - Редактирование и удаление треков
   - Отображение информации: название, исполнитель, жанр, BPM, длительность

3. **Коллекции**
   - Просмотр своих коллекций
   - Создание новых коллекций
   - Управление треками в коллекциях
   - Специальная коллекция "Любимые треки"

4. **Поиск**
   - Поиск треков по различным критериям (название, исполнитель, жанр, BPM, длительность)
   - Фильтрация результатов

5. **Админ-панель** (доступна только администраторам)
   - Управление пользователями
   - Просмотр всех треков
   - Просмотр журнала операций

## Требования реализованы
- ✅ Клиент-серверная архитектура с моделью сервера баз данных
- ✅ Серверная часть реализована с использованием процедурного расширения SQL (PL/pgSQL)
- ✅ Все запросы к базе данных через вызов хранимых процедур
- ✅ Аудит операций (журнал добавления, изменения, удаления с датой, типом и пользователем)
- ✅ Интуитивно понятный интерфейс на русском языке
- ✅ Разграничение прав доступа (пользователь/администратор)

## Используемые технологии
- **Frontend:** HTML5, CSS3, JavaScript (ES6+), Responsive Design
- **Backend:** Python Flask API
- **Database:** PostgreSQL с PL/pgSQL
- **Security:** JWT-аутентификация, шифрование паролей
- **API:** RESTful API с аутентификацией

## Установка и запуск

### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Настройка базы данных
1. Установите PostgreSQL
2. Создайте базу данных:
```sql
CREATE DATABASE music_library;
```
3. Выполните скрипт создания схемы:
```bash
psql -d music_library -f database_schema.sql
```

### Запуск сервера
```bash
export DB_HOST=localhost
export DB_NAME=music_library
export DB_USER=postgres
export DB_PASSWORD=ваш_пароль
export SECRET_KEY=ваш_секретный_ключ
python server.py
```

Сервер запустится на `http://localhost:5000`

## Тестовые учетные записи
- Администратор: `login: admin`, `password: admin`
- Обычный пользователь: `login: user`, `password: user`

## Особенности реализации
- Все операции с базой данных выполняются через хранимые процедуры на PL/pgSQL
- Реализовано разграничение прав доступа между обычными пользователями и администраторами
- Ведется журнал всех операций (аудит) с использованием триггеров
- Используется JWT-аутентификация для защиты API
- Пароли хранятся в зашифрованном виде
- Клиентский интерфейс полностью на русском языке